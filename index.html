<script>
let entries = JSON.parse(localStorage.getItem("khata")) || [];

function startListening() {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

  if (!SpeechRecognition) {
    alert("Aapke browser me voice support nahi hai");
    return;
  }

  const recognition = new SpeechRecognition();
  recognition.lang = "hi-IN";
  recognition.start();

  recognition.onresult = function (event) {
    const speechText = event.results[0][0].transcript;
    const date = new Date().toLocaleString("hi-IN");

    entries.push(date + " | " + speechText);
    localStorage.setItem("khata", JSON.stringify(entries));

    showEntries();
    speak("Entry save ho gayi");
  };

  recognition.onerror = function () {
    speak("Dobara koshish kijiye");
  };
}

function showEntries() {
  const div = document.getElementById("text");
  div.innerHTML = "<h3>Sabhi Entries:</h3>";

  entries.forEach((e, i) => {
    div.innerHTML += `<p>${i + 1}. ${e}</p>`;
  });
}

function speak(msg) {
  const s = new SpeechSynthesisUtterance(msg);
  s.lang = "hi-IN";
  window.speechSynthesis.speak(s);
}

showEntries();
</script>

